(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{91839:function(e,t,s){Promise.resolve().then(s.bind(s,89035))},89035:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var r=s(89075),a=s(50511),n=s(81023),i=s(980),l=s(65095),o=s(22526),c=s(78494),d=s(64150),u=s(56895),m=s(57311),x=s(2859);let h=[{name:"Dashboard",href:"/",icon:c.Z},{name:"Events",href:"/events",icon:d.Z},{name:"Positions",href:"/positions",icon:u.Z},{name:"Workers",href:"/workers",icon:m.Z},{name:"Settings",href:"/settings",icon:x.Z}];function f(e){let{children:t}=e,s=(0,l.usePathname)();return(0,r.jsx)("div",{className:"min-h-screen bg-background",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("aside",{className:"w-64 border-r bg-card p-4",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"Solana EDA"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Trading Bot"})]}),(0,r.jsx)("nav",{className:"space-y-2",children:h.map(e=>{let t=s===e.href,a=e.icon;return(0,r.jsxs)(i.default,{href:e.href,className:(0,o.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors",t?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,r.jsx)(a,{className:"h-4 w-4"}),e.name]},e.name)})})]}),(0,r.jsx)("main",{className:"flex-1 p-6",children:t})]})})}var g=s(52904),j=s(48645),p=s(85245);function v(e){let{events:t}=e,[s,n]=(0,a.useState)("all"),i=t.filter(e=>"all"===s||e.type.toLowerCase().includes(s.toLowerCase())),l=e=>{switch(e){case"BURN_DETECTED":return(0,r.jsx)(g.Z,{className:"h-4 w-4 text-orange-500"});case"LIQUIDITY_CHANGED":return(0,r.jsx)(j.Z,{className:"h-4 w-4 text-blue-500"});case"TRADE_EXECUTED":return(0,r.jsx)(u.Z,{className:"h-4 w-4 text-green-500"});case"POSITION_OPENED":return(0,r.jsx)(d.Z,{className:"h-4 w-4 text-purple-500"});case"POSITION_CLOSED":return(0,r.jsx)(d.Z,{className:"h-4 w-4 text-gray-500"});default:return(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"})}},c=e=>{switch(e){case"BURN_DETECTED":return"bg-orange-500/10 border-orange-500/20";case"LIQUIDITY_CHANGED":return"bg-blue-500/10 border-blue-500/20";case"TRADE_EXECUTED":return"bg-green-500/10 border-green-500/20";case"POSITION_OPENED":return"bg-purple-500/10 border-purple-500/20";default:return"bg-gray-500/10 border-gray-500/20"}};return(0,r.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Event Feed"}),(0,r.jsxs)("select",{value:s,onChange:e=>n(e.target.value),className:"rounded border bg-background px-3 py-1 text-sm",children:[(0,r.jsx)("option",{value:"all",children:"All Events"}),(0,r.jsx)("option",{value:"burn",children:"Burns"}),(0,r.jsx)("option",{value:"liquidity",children:"Liquidity"}),(0,r.jsx)("option",{value:"trade",children:"Trades"}),(0,r.jsx)("option",{value:"position",children:"Positions"})]})]}),(0,r.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:0===i.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No events yet. Waiting for real-time updates..."}):i.map(e=>(0,r.jsxs)("div",{className:"flex items-start gap-3 rounded-lg border p-4 ".concat(c(e.type)),children:[(0,r.jsx)("div",{className:"mt-1",children:l(e.type)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"font-medium",children:e.type.replace(/_/g," ")}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,o.i$)(e.timestamp)})]}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-muted-foreground",children:["BURN_DETECTED"===e.type&&(0,r.jsxs)(r.Fragment,{children:["Burned ",(0,o.uf)(Number(e.data.amount))," tokens (",e.data.percentage.toFixed(2),"%)"]}),"LIQUIDITY_CHANGED"===e.type&&(0,r.jsxs)(r.Fragment,{children:["TVL changed by ",e.data.changePercentage.toFixed(2),"%"]}),"TRADE_EXECUTED"===e.type&&(0,r.jsxs)(r.Fragment,{children:[e.data.type," ",(0,o.uf)(Number(e.data.amountOut))," at"," ",(0,o.uf)(Number(e.data.price))]}),"POSITION_OPENED"===e.type&&(0,r.jsxs)(r.Fragment,{children:["Opened position: ",(0,o.uf)(Number(e.data.amount))," @"," ",(0,o.uf)(Number(e.data.entryPrice))]}),"POSITION_CLOSED"===e.type&&(0,r.jsxs)(r.Fragment,{children:["Closed position: P&L ",(0,o.uf)(Number(e.data.pnlPercent)),"%"]})]})]})]},e.id))})]})}var N=s(78719),b=s(34928);function y(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null),o=async()=>{try{l(null);let e=await fetch("".concat("http://localhost:3000","/workers"));if(!e.ok)throw Error("Failed to fetch workers: ".concat(e.status));let s=await e.json();t(s)}catch(e){console.error("Error fetching workers:",e),l(e instanceof Error?e.message:"Failed to fetch workers")}finally{n(!1)}};(0,a.useEffect)(()=>{o();let e=setInterval(o,1e4);return()=>clearInterval(e)},[]);let c=e=>{switch(e){case"RUNNING":return(0,r.jsx)(N.Z,{className:"h-4 w-4 text-green-500"});case"STOPPED":return(0,r.jsx)(p.Z,{className:"h-4 w-4 text-yellow-500"});case"ERROR":return(0,r.jsx)(b.Z,{className:"h-4 w-4 text-red-500"})}},u=e=>{switch(e){case"RUNNING":return"bg-green-500/10 text-green-500";case"STOPPED":return"bg-yellow-500/10 text-yellow-500";case"ERROR":return"bg-red-500/10 text-red-500"}},m=e=>{if(!e)return"N/A";let t=Math.floor(e/1e3),s=Math.floor(t/60),r=Math.floor(s/60);return r>0?"".concat(r,"h ").concat(s%60,"m"):s>0?"".concat(s,"m ").concat(t%60,"s"):"".concat(t,"s")};return(0,r.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Worker Status"}),(0,r.jsx)(d.Z,{className:"h-5 w-5 text-muted-foreground"})]}),s?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Loading workers..."})}):i?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsxs)("div",{className:"text-sm text-red-500",children:["Error: ",i]})}):0===e.length?(0,r.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"No workers found"})}):(0,r.jsx)("div",{className:"space-y-3",children:e.map(e=>{var t,s,a,n,i;return(0,r.jsx)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[c(e.status),(0,r.jsx)("span",{className:"font-medium",children:e.name}),(0,r.jsx)("span",{className:"rounded px-2 py-0.5 text-xs ".concat(u(e.status)),children:e.status})]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:["Events: ",null!==(n=null===(t=e.metrics)||void 0===t?void 0:t.eventsProcessed)&&void 0!==n?n:0," | Errors: ",null!==(i=null===(s=e.metrics)||void 0===s?void 0:s.errors)&&void 0!==i?i:0," | Uptime:"," ",m(null===(a=e.metrics)||void 0===a?void 0:a.uptime)]})]})},e.name)})})]})}var w=s(19363),E=s(85835),k=s(91067);function D(){let[e,t]=(0,a.useState)([]);async function s(){try{let e=await fetch("".concat("http://localhost:3000","/positions/open")),s=await e.json();t(s)}catch(e){console.error("Error fetching positions:",e)}}(0,a.useEffect)(()=>{s();let e=setInterval(s,5e3);return()=>clearInterval(e)},[]);let n=e.reduce((e,t)=>e+Number(t.amount)*Number(t.currentPrice),0),i=e.reduce((e,t)=>e+Number(t.pnl),0),l=e=>e>0?"text-green-500":e<0?"text-red-500":"text-gray-500";return(0,r.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Open Positions"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.length," positions"]})]}),(0,r.jsxs)("div",{className:"mb-6 grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"rounded-lg bg-accent p-4",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Value"}),(0,r.jsx)("div",{className:"text-2xl font-bold",children:(0,o.xG)(n)})]}),(0,r.jsxs)("div",{className:"rounded-lg bg-accent p-4",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total P&L"}),(0,r.jsxs)("div",{className:"text-2xl font-bold flex items-center gap-2 ".concat(l(i)),children:[i>0?(0,r.jsx)(w.Z,{className:"h-4 w-4 text-green-500"}):i<0?(0,r.jsx)(E.Z,{className:"h-4 w-4 text-red-500"}):(0,r.jsx)(k.Z,{className:"h-4 w-4 text-gray-500"}),(0,o.rl)(i)]})]})]}),0===e.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No open positions. Waiting for trades..."}):(0,r.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-medium",children:e.token}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,o.xG)(Number(e.amount)*Number(e.currentPrice))})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:l(Number(e.pnl)),children:(0,o.rl)(Number(e.pnl))}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:(0,o.i$)(e.openedAt)})]})]},e.id))})]})}var S=s(36872);function T(){let[e,t]=(0,a.useState)({totalVolume:0,winRate:0,tradesToday:0,totalPositions:0});async function s(){try{let e="http://localhost:3000",[s,r]=await Promise.all([fetch("".concat(e,"/trading/stats/volume?days=1")),fetch("".concat(e,"/positions"))]),a=await s.json(),n=await r.json();t({totalVolume:a.totalVolume||0,winRate:a.winRate||0,tradesToday:a.tradeCount||0,totalPositions:n.length||0})}catch(e){console.error("Error fetching stats:",e)}}(0,a.useEffect)(()=>{s();let e=setInterval(s,1e4);return()=>clearInterval(e)},[]);let n=[{title:"24h Volume",value:(0,o.xG)(e.totalVolume),icon:u.Z,color:"text-blue-500"},{title:"Win Rate",value:"".concat(e.winRate.toFixed(1),"%"),icon:j.Z,color:"text-green-500"},{title:"Trades Today",value:e.tradesToday,icon:d.Z,color:"text-purple-500"},{title:"Open Positions",value:e.totalPositions,icon:S.Z,color:"text-orange-500"}];return(0,r.jsx)(r.Fragment,{children:n.map(e=>{let t=e.icon;return(0,r.jsx)("div",{className:"rounded-lg border bg-card p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:e.title}),(0,r.jsx)("div",{className:"mt-2 text-2xl font-bold",children:e.value})]}),(0,r.jsx)(t,{className:"h-8 w-8 ".concat(e.color)})]})},e.title)})})}var P=s(7640);function I(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)(!1),[l,o]=(0,a.useState)(null),[c,d]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=(0,n.io)("ws://localhost:3000");return e.on("connect",()=>{console.log("Connected to WebSocket"),i(!0),e.emit("subscribe","events:burn"),e.emit("subscribe","events:liquidity"),e.emit("subscribe","events:trades"),e.emit("subscribe","events:positions"),e.emit("subscribe","events:price"),e.emit("subscribe","workers:status")}),e.on("disconnect",()=>{console.log("Disconnected from WebSocket"),i(!1)}),e.on("event",e=>{t(t=>[e.data,...t].slice(0,100)),"events:price"===e.channel&&"PRICE_UPDATE"===e.data.type&&d(t=>{let s={token:e.data.data.token,price:parseFloat(e.data.data.price),timestamp:e.data.timestamp};return[...t.filter(e=>e.token!==s.token),s].slice(-50)})}),e.on("subscribed",e=>{console.log("Subscribed to:",e.channel)}),o(e),()=>{e.disconnect()}},[]);let u=e.filter(e=>"BURN_DETECTED"===e.type).map(e=>({timestamp:e.timestamp,burns:1,amount:parseFloat(e.data.amount||"0")})).slice(-50);return Array.from(new Set(c.map(e=>e.token))).slice(0,5),(0,r.jsx)(f,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Solana EDA Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Real-time trading bot monitoring"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(s?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-sm text-muted-foreground",children:s?"Connected":"Disconnected"})]})]}),(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:(0,r.jsx)(T,{})}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[u.length>0&&(0,r.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Burn Trend (Last 50)"}),(0,r.jsx)(P.aq,{data:u,height:200})]}),c.length>0&&(0,r.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Price Updates"}),(0,r.jsx)(P.ZY,{data:c.map(e=>({timestamp:e.timestamp,pnl:e.price})),height:200})]})]}),(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-6 lg:col-span-2",children:[(0,r.jsx)(D,{}),(0,r.jsx)(v,{events:e})]}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)(y,{})})]})]})})}},7640:function(e,t,s){"use strict";s.d(t,{aq:function(){return f},ZY:function(){return m}});var r=s(89075),a=s(7596),n=s(35144),i=s(12827),l=s(98981),o=s(66063),c=s(33936),d=s(80151),u=s(64045);function m(e){let{data:t,height:s=300}=e;if(0===t.length)return(0,r.jsx)("div",{className:"flex items-center justify-center",style:{height:s},children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No P&L data available"})});let m=t.map(e=>({...e,time:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));return(0,r.jsx)(a.h,{width:"100%",height:s,children:(0,r.jsxs)(n.w,{data:m,children:[(0,r.jsx)(i.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),(0,r.jsx)(l.K,{dataKey:"time",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1}),(0,r.jsx)(o.B,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,tickFormatter:e=>"$".concat(e.toFixed(2))}),(0,r.jsx)(c.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},labelStyle:{color:"hsl(var(--foreground))"},formatter:e=>["$".concat(e.toFixed(2)),"P&L"]}),(0,r.jsx)(d.D,{}),(0,r.jsx)(u.x,{type:"monotone",dataKey:"pnl",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1,name:"P&L"})]})})}var x=s(63874),h=s(35049);function f(e){let{data:t,height:s=300}=e;if(0===t.length)return(0,r.jsx)("div",{className:"flex items-center justify-center",style:{height:s},children:(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"No burn trend data available"})});let n=t.map(e=>({...e,time:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));return(0,r.jsx)(a.h,{width:"100%",height:s,children:(0,r.jsxs)(x.T,{data:n,children:[(0,r.jsx)(i.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),(0,r.jsx)(l.K,{dataKey:"time",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1}),(0,r.jsx)(o.B,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,label:{value:"Burns",angle:-90,position:"insideLeft"}}),(0,r.jsx)(o.B,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,label:{value:"Amount",angle:90,position:"insideRight"},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k")}),(0,r.jsx)(c.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},labelStyle:{color:"hsl(var(--foreground))"}}),(0,r.jsx)(h.u,{yAxisId:"left",type:"monotone",dataKey:"burns",stroke:"hsl(var(--chart-1, 270, 70%))",fill:"hsl(var(--chart-1, 270, 70%))",fillOpacity:.6,name:"Burn Count"}),(0,r.jsx)(h.u,{yAxisId:"right",type:"monotone",dataKey:"amount",stroke:"hsl(var(--chart-2, 280, 70%))",fill:"hsl(var(--chart-2, 280, 70%))",fillOpacity:.6,name:"Burn Amount"})]})})}},22526:function(e,t,s){"use strict";s.d(t,{cn:function(){return n},i$:function(){return o},rl:function(){return l},uf:function(){return i},xG:function(){return c}});var r=s(68273),a=s(99842);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e>=1e6?"".concat((e/1e6).toFixed(t),"M"):e>=1e3?"".concat((e/1e3).toFixed(t),"K"):e.toFixed(t)}function l(e){return"".concat(e>=0?"+":"").concat(e.toFixed(2),"%")}function o(e){let t=new Date(e),s=new Date().getTime()-t.getTime();return s<6e4?"Just now":s<36e5?"".concat(Math.floor(s/6e4),"m ago"):s<864e5?"".concat(Math.floor(s/36e5),"h ago"):t.toLocaleDateString()}function c(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}}},function(e){e.O(0,[481,519,136,852,999,744],function(){return e(e.s=91839)}),_N_E=e.O()}]);