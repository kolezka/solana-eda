(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{14353:function(e,t,n){Promise.resolve().then(n.bind(n,80253))},80253:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var s=n(89075),r=n(50511),i=n(34641),o=n(22526),a=n(24637),l=n(7640),d=n(48645),c=n(30193);/**
 * @license lucide-react v0.316.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,c.Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),m=(0,c.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var x=n(49397);function f(){let[e,t]=(0,r.useState)("open"),[n,c]=(0,r.useState)([]),[f,g]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null),[b,k]=(0,r.useState)(!1),w=async()=>{p(!0);try{let[t,n]=await Promise.all(["open"===e?a.KX.getOpen():a.KX.getClosed(100),a.KX.getStats()]);c(t),g(n)}catch(e){console.error("Error fetching positions:",e)}finally{p(!1)}};(0,r.useEffect)(()=>{w()},[e]);let P=async()=>{if(y){k(!0);try{await a.KX.closePosition(y.id,Number(y.currentPrice)),v(!1),N(null),w()}catch(e){console.error("Error closing position:",e)}finally{k(!1)}}},S=e=>{N(e),v(!0)},C=n.filter(e=>"CLOSED"===e.status&&e.closedAt).map(e=>({timestamp:e.closedAt,pnl:e.pnl})).sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime());return(0,s.jsxs)("div",{className:"container mx-auto py-6",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Positions"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your trading positions"})]}),f&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Value"}),(0,s.jsx)("div",{className:"mt-2 text-2xl font-bold",children:(0,o.xG)(f.totalValue)})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total P&L"}),(0,s.jsxs)("div",{className:"mt-2 text-2xl font-bold ".concat(f.totalPnl>=0?"text-green-500":"text-red-500"),children:[f.totalPnl>=0?"+":"",(0,o.xG)(f.totalPnl)]})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Avg P&L"}),(0,s.jsxs)("div",{className:"mt-2 text-2xl font-bold ".concat(f.avgPnl>=0?"text-green-500":"text-red-500"),children:[f.avgPnl>=0?"+":"",f.avgPnl.toFixed(2),"%"]})]}),(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Win Rate"}),(0,s.jsxs)("div",{className:"mt-2 text-2xl font-bold",children:[f.totalPositions>0?(f.winningPositions/f.totalPositions*100).toFixed(1):"0","%"]})]})]}),"closed"===e&&C.length>0&&(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"P&L Over Time"}),(0,s.jsx)(l.ZY,{data:C,height:250})]}),(0,s.jsxs)(i.mQ,{value:e,onValueChange:e=>t(e),children:[(0,s.jsxs)(i.dr,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(i.SP,{value:"open",children:["Open Positions (",n.filter(e=>"OPEN"===e.status).length,")"]}),(0,s.jsxs)(i.SP,{value:"closed",children:["Closed Positions (",n.filter(e=>"CLOSED"===e.status).length,")"]})]}),(0,s.jsx)(i.nU,{value:e,className:"mt-6",children:h?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsx)("div",{className:"text-muted-foreground",children:"Loading positions..."})}):0===n.length?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"text-muted-foreground",children:["No ",e," positions found"]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(e=>(0,s.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,s.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-lg",children:e.token}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,o.uf)(e.amount)," tokens"]})]}),(0,s.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat("OPEN"===e.status?"bg-green-500/10 text-green-500":"bg-gray-500/10 text-gray-500"),children:e.status})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Entry Price:"}),(0,s.jsx)("span",{children:(0,o.xG)(e.entryPrice)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Current Price:"}),(0,s.jsx)("span",{children:(0,o.xG)(e.currentPrice)})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"P&L:"}),(0,s.jsxs)("span",{className:"font-medium flex items-center gap-1 ".concat(e.pnl>=0?"text-green-500":"text-red-500"),children:[e.pnl>=0?(0,s.jsx)(d.Z,{className:"h-3 w-3"}):(0,s.jsx)(u,{className:"h-3 w-3"}),e.pnl>=0?"+":"",e.pnl.toFixed(2),"%"]})]}),e.stopLoss&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Stop Loss:"}),(0,s.jsxs)("span",{children:[e.stopLoss,"%"]})]}),e.takeProfit&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Take Profit:"}),(0,s.jsxs)("span",{children:[e.takeProfit,"%"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Opened:"}),(0,s.jsx)("span",{children:(0,o.i$)(e.openedAt)})]})]}),"OPEN"===e.status&&(0,s.jsxs)("button",{onClick:()=>S(e),className:"mt-4 w-full flex items-center justify-center gap-2 rounded-md border px-4 py-2 text-sm font-medium hover:bg-muted transition-colors",children:[(0,s.jsx)(m,{className:"h-4 w-4"}),"Close Position"]})]},e.id))})})]}),(0,s.jsx)(x.Vq,{open:j,onOpenChange:v,children:(0,s.jsxs)(x.cZ,{children:[(0,s.jsxs)(x.fK,{children:[(0,s.jsx)(x.$N,{children:"Close Position"}),(0,s.jsx)(x.Be,{children:"Are you sure you want to close this position? This action cannot be undone."})]}),y&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Token:"}),(0,s.jsx)("p",{className:"font-medium",children:y.token})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Amount:"}),(0,s.jsx)("p",{className:"font-medium",children:(0,o.uf)(y.amount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Entry Price:"}),(0,s.jsx)("p",{className:"font-medium",children:(0,o.xG)(y.entryPrice)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Current Price:"}),(0,s.jsx)("p",{className:"font-medium",children:(0,o.xG)(y.currentPrice)})]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-lg border ".concat(y.pnl>=0?"bg-green-500/10 border-green-500/20":"bg-red-500/10 border-red-500/20"),children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Unrealized P&L"}),(0,s.jsxs)("div",{className:"text-lg font-bold ".concat(y.pnl>=0?"text-green-500":"text-red-500"),children:[y.pnl>=0?"+":"",y.pnl.toFixed(2),"%"]})]})]}),(0,s.jsxs)(x.cN,{children:[(0,s.jsx)("button",{onClick:()=>v(!1),disabled:b,className:"px-4 py-2 rounded-md border hover:bg-muted transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:P,disabled:b,className:"px-4 py-2 rounded-md bg-red-500 text-white hover:bg-red-600 transition-colors disabled:opacity-50",children:b?"Closing...":"Close Position"})]})]})})]})}},7640:function(e,t,n){"use strict";n.d(t,{aq:function(){return g},ZY:function(){return m}});var s=n(89075),r=n(7596),i=n(35144),o=n(12827),a=n(98981),l=n(66063),d=n(33936),c=n(80151),u=n(64045);function m(e){let{data:t,height:n=300}=e;if(0===t.length)return(0,s.jsx)("div",{className:"flex items-center justify-center",style:{height:n},children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No P&L data available"})});let m=t.map(e=>({...e,time:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));return(0,s.jsx)(r.h,{width:"100%",height:n,children:(0,s.jsxs)(i.w,{data:m,children:[(0,s.jsx)(o.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),(0,s.jsx)(a.K,{dataKey:"time",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1}),(0,s.jsx)(l.B,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,tickFormatter:e=>"$".concat(e.toFixed(2))}),(0,s.jsx)(d.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},labelStyle:{color:"hsl(var(--foreground))"},formatter:e=>["$".concat(e.toFixed(2)),"P&L"]}),(0,s.jsx)(c.D,{}),(0,s.jsx)(u.x,{type:"monotone",dataKey:"pnl",stroke:"hsl(var(--primary))",strokeWidth:2,dot:!1,name:"P&L"})]})})}var x=n(63874),f=n(35049);function g(e){let{data:t,height:n=300}=e;if(0===t.length)return(0,s.jsx)("div",{className:"flex items-center justify-center",style:{height:n},children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No burn trend data available"})});let i=t.map(e=>({...e,time:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}));return(0,s.jsx)(r.h,{width:"100%",height:n,children:(0,s.jsxs)(x.T,{data:i,children:[(0,s.jsx)(o.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),(0,s.jsx)(a.K,{dataKey:"time",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1}),(0,s.jsx)(l.B,{yAxisId:"left",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,label:{value:"Burns",angle:-90,position:"insideLeft"}}),(0,s.jsx)(l.B,{yAxisId:"right",orientation:"right",stroke:"hsl(var(--muted-foreground))",fontSize:12,tickLine:!1,label:{value:"Amount",angle:90,position:"insideRight"},tickFormatter:e=>"$".concat((e/1e3).toFixed(0),"k")}),(0,s.jsx)(d.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"0.5rem"},labelStyle:{color:"hsl(var(--foreground))"}}),(0,s.jsx)(f.u,{yAxisId:"left",type:"monotone",dataKey:"burns",stroke:"hsl(var(--chart-1, 270, 70%))",fill:"hsl(var(--chart-1, 270, 70%))",fillOpacity:.6,name:"Burn Count"}),(0,s.jsx)(f.u,{yAxisId:"right",type:"monotone",dataKey:"amount",stroke:"hsl(var(--chart-2, 280, 70%))",fill:"hsl(var(--chart-2, 280, 70%))",fillOpacity:.6,name:"Burn Amount"})]})})}},49397:function(e,t,n){"use strict";n.d(t,{$N:function(){return u},Be:function(){return m},Vq:function(){return o},cN:function(){return x},cZ:function(){return d},fK:function(){return c}});var s=n(89075),r=n(50511),i=n(69);let o=i.fC;i.xz;let a=i.h_;i.x8;let l=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.aV,{ref:t,className:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 ".concat(n||""),...r})});l.displayName=i.aV.displayName;let d=r.forwardRef((e,t)=>{let{className:n,children:r,...o}=e;return(0,s.jsxs)(a,{children:[(0,s.jsx)(l,{}),(0,s.jsxs)(i.VY,{ref:t,className:"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg ".concat(n||""),...o,children:[r,(0,s.jsx)(i.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})});d.displayName=i.VY.displayName;let c=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:"flex flex-col space-y-1.5 text-center sm:text-left ".concat(t||""),...n})};c.displayName="DialogHeader";let u=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.Dx,{ref:t,className:"text-lg font-semibold leading-none tracking-tight ".concat(n||""),...r})});u.displayName=i.Dx.displayName;let m=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.dk,{ref:t,className:"text-sm text-muted-foreground ".concat(n||""),...r})});m.displayName=i.dk.displayName;let x=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 ".concat(t||""),...n})};x.displayName="DialogFooter"},34641:function(e,t,n){"use strict";n.d(t,{SP:function(){return l},dr:function(){return a},mQ:function(){return o},nU:function(){return d}});var s=n(89075),r=n(50511),i=n(81141);let o=i.fC,a=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.aV,{ref:t,className:"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground ".concat(n||""),...r})});a.displayName=i.aV.displayName;let l=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.xz,{ref:t,className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm ".concat(n||""),...r})});l.displayName=i.xz.displayName;let d=r.forwardRef((e,t)=>{let{className:n,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 ".concat(n||""),...r})});d.displayName=i.VY.displayName},24637:function(e,t,n){"use strict";async function s(e,t){let n="".concat("http://localhost:3000").concat(e);try{let e=await fetch(n,{headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},...t});if(!e.ok){let t=await e.text();throw Error("API Error (".concat(e.status,"): ").concat(t||e.statusText))}return await e.json()}catch(t){throw console.error("API request failed: ".concat(e),t),t}}n.d(t,{KX:function(){return o},dK:function(){return i},oK:function(){return a},uk:function(){return r}});let r={getAll:()=>s("/workers"),getRunning:()=>s("/workers/running"),getErrors:()=>s("/workers/errors"),getStale:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return s("/workers/stale?olderThanMinutes=".concat(e))},getByName:e=>s("/workers/".concat(e))},i={getAll:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/events?limit=".concat(e))},getBurns:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/events/burn?limit=".concat(e))},getLiquidity:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/events/liquidity?limit=".concat(e))},getTrades:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/events/trades?limit=".concat(e))},getPositions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/events/positions?limit=".concat(e))},getPrices:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=arguments.length>1?arguments[1]:void 0;return s("/events/prices?limit=".concat(e).concat(t?"&token=".concat(t):""))}},o={getAll:()=>s("/positions"),getOpen:()=>s("/positions/open"),getClosed:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/positions/closed?limit=".concat(e))},getById:e=>s("/positions/".concat(e)),getByToken:e=>s("/positions/token/".concat(e)),getStats:()=>s("/positions/stats"),updatePrice:(e,t)=>s("/positions/".concat(e,"/price"),{method:"PUT",body:JSON.stringify({price:t})}),closePosition:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"MANUAL";return s("/positions/".concat(e,"/close"),{method:"POST",body:JSON.stringify({exitPrice:t,reason:n})})}},a={getSettings:()=>s("/trading/settings"),getEnabledSettings:()=>s("/trading/settings/enabled"),getSettingsByName:e=>s("/trading/settings/".concat(e)),updateSettings:(e,t)=>s("/trading/settings/".concat(e),{method:"PUT",body:JSON.stringify(t)}),toggleEnabled:e=>s("/trading/settings/".concat(e,"/toggle"),{method:"PATCH"}),getTrades:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/trading/trades?limit=".concat(e))},getBuyTrades:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/trading/trades/buy?limit=".concat(e))},getSellTrades:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return s("/trading/trades/sell?limit=".concat(e))},getVolumeStats:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7;return s("/trading/stats/volume?days=".concat(e))}}},22526:function(e,t,n){"use strict";n.d(t,{cn:function(){return i},i$:function(){return l},rl:function(){return a},uf:function(){return o},xG:function(){return d}});var s=n(68273),r=n(99842);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.m6)((0,s.W)(t))}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e>=1e6?"".concat((e/1e6).toFixed(t),"M"):e>=1e3?"".concat((e/1e3).toFixed(t),"K"):e.toFixed(t)}function a(e){return"".concat(e>=0?"+":"").concat(e.toFixed(2),"%")}function l(e){let t=new Date(e),n=new Date().getTime()-t.getTime();return n<6e4?"Just now":n<36e5?"".concat(Math.floor(n/6e4),"m ago"):n<864e5?"".concat(Math.floor(n/36e5),"h ago"):t.toLocaleDateString()}function d(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e)}}},function(e){e.O(0,[481,43,519,670,852,999,744],function(){return e(e.s=14353)}),_N_E=e.O()}]);